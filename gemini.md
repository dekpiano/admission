
# ภาพรวมระบบรับสมัครนักเรียน

จากการวิเคราะห์โครงสร้างและไฟล์ Controller ของโปรเจกต์ สรุปการทำงานของระบบได้ดังนี้:

**ภาพรวม:**
เป็นระบบรับสมัครนักเรียนออนไลน์ที่พัฒนาด้วย CodeIgniter Framework โดยแบ่งการทำงานหลักออกเป็น 3 ส่วน คือ ส่วนรับสมัคร, ส่วนของนักเรียนที่สมัครแล้ว, และส่วนของผู้ดูแลระบบ

---

### 1. ส่วนการรับสมัคร (Admission)
- **Controller:** `application/controllers/Control_admission.php`
- **Model:** `application/models/Model_admission.php`
- **หน้าที่หลัก:**
    - แสดงหน้าฟอร์มสำหรับให้นักเรียนกรอกข้อมูลเพื่อสมัครเรียน (`reg_student`)
    - ตรวจสอบความถูกต้องของข้อมูลและบันทึกลงฐานข้อมูล (`reg_insert`)
    - จัดการการอัปโหลดไฟล์ที่เกี่ยวข้อง เช่น รูปนักเรียน, ใบ ปพ.1, และเอกสารความสามารถพิเศษ (`reg_img`, `UploadCertificateAbility`)
    - มีการตรวจสอบการสมัครซ้ำซ้อนโดยใช้เลขบัตรประชาชน (`CheckStudentRegister`)
    - สามารถพิมพ์ใบสมัครฉบับเต็มในรูปแบบ PDF ได้ (`pdf`)
    - มีระบบเปิด-ปิดการรับสมัครตามเวลาที่กำหนด (`CheckOnOffRegis`)

---

### 2. ส่วนการยืนยันตัวตน (Login)
- **Controller:** `application/controllers/Control_login.php`
- **Model:** `application/models/Model_login.php`
- **หน้าที่หลัก:**
    - จัดการการเข้าสู่ระบบสำหรับ 2 กลุ่มผู้ใช้:
        1. **นักเรียน:** ล็อกอินโดยใช้ "เลขบัตรประชาชน" และ "วัน/เดือน/ปีเกิด" (`CheckLogin`)
        2. **ผู้ดูแลระบบ (ครู/เจ้าหน้าที่):** ล็อกอินผ่าน 2 ช่องทาง คือ
            - ชื่อผู้ใช้และรหัสผ่านของระบบ (`validlogin`)
            - บัญชี Google (`login_admin`)
    - สร้างและจัดการ Session หลังจากการล็อกอินสำเร็จ
    - จัดการการออกจากระบบ (`logout`)

---

### 3. ส่วนนักเรียน (Student Dashboard)
- **Controller:** `application/controllers/Control_students.php`
- **หน้าที่หลัก:** (ต้องล็อกอินในฐานะนักเรียนก่อน)
    - แสดงหน้าแดชบอร์ดสรุปข้อมูลส่วนตัวและสถานะการสมัคร (`StudentsHome`)
    - แสดงรายละเอียดสถานะการสมัคร ว่าผ่านหรือไม่ผ่านการตรวจสอบ (`StudentsStatus`)
    - อนุญาตให้นักเรียนแก้ไขข้อมูลการสมัครของตนเองได้ (`StudentsEdit`, `reg_update`)
    - จัดการการอัปเดตไฟล์เอกสารต่างๆ ใหม่ (`update_img`, `UploadCertificateAbility`)
    - สร้างไฟล์ PDF สำหรับบัตรประจำตัวผู้สมัคร (`PDFForStudent`)

---

### ฐานข้อมูลและเทคโนโลยีเสริม
- **ฐานข้อมูลหลัก:** `skjacth_admission` ใช้เก็บข้อมูลการรับสมัครเป็นหลักในตาราง `tb_recruitstudent`
- **ฐานข้อมูลบุคลากร:** `skjacth_personnel` (จากไฟล์ `skjacth_skj.sql`) ใช้เก็บข้อมูลครูและเจ้าหน้าที่ในตาราง `tb_personnel` สำหรับการล็อกอินเข้าระบบแอดมิน
- **PDF Generation:** ใช้ไลบรารี `mpdf` ในการสร้างเอกสาร PDF
- **Security:** มีการใช้งาน hCaptcha/reCAPTCHA เพื่อป้องกันบอท
- **Dependencies:** มีการใช้งาน Google API Client สำหรับการล็อกอินด้วย Google
